<app-loading-screen *ngIf="isVisibleLoadingScreen$ | async"></app-loading-screen>
<app-layout #layout>
	<app-logo logo (click)="onLogoClick()"></app-logo>
	<app-project-explorer project (resize)="layout.resizePanel('left', $event)"></app-project-explorer>
	<app-project-tabs
		scViewer
		(move)="moveTab($event.prevIndex, $event.currentIndex)"
		(close)="closeTab($event)"
		(selectedTab)="selectTab($event)">
		<app-project-tab *ngFor="let tab of openedTabs$ | async; let i = index"
						 [active]="i === (currentTabIndex$ | async)"
						 [title]="tab.title"
						 [type]="tab.componentType">
			<ng-container *ngIf="tab.componentType === 'sc'">
				<app-sc-viewer *ngIf="getScById$(tab.projectId, tab.componentId) | async as sc"
							   [projectId]="tab.projectId"
							   [chainId]="(getProjectChainId$(tab.projectId) | async) || ''"
							   [sc]="sc" [abi]="getAbiById$(tab.projectId, sc.abiId) | async">
				</app-sc-viewer>
			</ng-container>

			<app-sc-viewer *ngIf="tab.componentType === 'abi'"
						   [projectId]="tab.projectId"
						   [chainId]="(getProjectChainId$(tab.projectId) | async) || ''"
						   [abi]="getAbiById$(tab.projectId, tab.componentId) | async">
			</app-sc-viewer>

			<app-token-viewer *ngIf="tab.componentType === 'token'"
							  [projectId]="tab.projectId"
							  [identifier]="tab.componentId"></app-token-viewer>
			<app-wallet-viewer *ngIf="tab.componentType === 'wallet'"
							   [projectId]="tab.projectId"
							   [address]="tab.componentId"></app-wallet-viewer>
			<app-address-book-viewer *ngIf="tab.componentType === 'address_book'"
									 [projectId]="tab.projectId">
			</app-address-book-viewer>
			<app-tx-viewer *ngIf="tab.componentType === 'tx'" [txHash]="tab.componentId"
						   [projectId]="tab.projectId"></app-tx-viewer>
			<app-home-page *ngIf="tab.componentType === 'home'"></app-home-page>
		</app-project-tab>
	</app-project-tabs>
	<app-action-list actionHistory (resize)="layout.resizePanel('right', $event)"></app-action-list>
</app-layout>
